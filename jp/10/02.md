---
title: Getting Started with Truffle
actions: ['答え合わせ', 'ヒント']
requireLogin: true
material:
  terminal:
        help: |
            First, you should probably run `truffle init`. Next, execute `npm install truffle-hdwallet-provider`
        commands:
            "truffle init":
                hint: truffle init
                output: |
                    Downloading...
                    Unpacking...
                    Setting up...
                    Unbox successful. Sweet!

                    Commands:

                        Compile:        truffle compile
                        Migrate:        truffle migrate
                        Test contracts: truffle test
            "npm install truffle-hdwallet-provider":
                hint: npm install truffle-hdwallet-provider
                output: |
                  + truffle-hdwallet-provider@0.0.6
                  added 1 package from 1 contributor and audited 71402 packages in 5.612s
                  found 0 vulnerabilities
---

**Truffle** のインストールが終わったら、次は`truffle init`コマンドを叩いて、我々のプロジェクトを初期化するぞ。このコマンドは、フォルダーと設定ファイルを以下のような構成で作成してくれる:

```
├── contracts
    ├── Migrations.sol
├── migrations
    ├── 1_initial_migration.js
└── test
truffle-config.js
truffle.js
```

Contracts, migrations, tests... ややこしいな😟

心配するな。 **Truffle** の使い方を学んでいるからと言って、ゾンビに脳みそを食べられたりしない。この章では **Truffle** のデフォルトのプロジェクト構成を紹介する。一旦 **Truffle** の使い方を知ってしまえば、スマートコントラクトのデプロイなんて朝飯前になるぞ。

## Truffleのデフォルトのディレクトリー構成

さあ、`CryptoZombies`ディレクトリーの中で`truffle init`コマンドを叩いて、いくつかのディレクトリーとJavaScript、Solidityのファイルを作成するのだ。詳しく見ていくぞ:

 - **_contracts_**: ここに我々のスマートコントラクトのコードを全て置く。コードを整理するには、`contracts/tokens`というように子フォルダーを作成すればいい😉。

 > 注: `truffle init`コマンドは自動的に`Migrations.sol`という名前のコントラクトとそれに対応するマイグレーションファイルを作成する。この説明は後だ。

 - **_migrations_**: ここにはJavaScriptで書かれたマイグレーションファイルが置かれている。 **Truffle** がスマートコントラクトにデプロイする際の設定が書かれているぞ。

 - **_test_**: ここにテストコードを置く。テストコードはJavaScript か Solidityで書かなければならない。コントラクトはデプロイしたら変更できないことを覚えているか？デプロイ前にスマートコントラクトをテストすることが不可欠だ。

 - **_truffle.js_** and **_truffle-config.js_**: ここにはデプロイ用のネットワーク設定ファイルが置かれている。`truffle.js` と `truffle-config.js`の内容は同じだ。Windows環境では`truffle.js` と `truffle.exe`が同じフォルダーにあると競合してしまう。お前がWindowsを使っているなら、`truffle.js`を削除し、`truffle-config.js`をデフォルトの設定ファイルにするのだ。詳しく知りたければ<a href="https://truffleframework.com/docs/truffle/reference/configuration" target=_blank>Truffleの公式ドキュメント</a>を訪ねるといい。


こんなディレクトリー構成を使わなければならないのか？不慣れだし、ややこしく見える…

それには２つ理由がある。１つ目は、これらのフォルダーの名前を変えてしまうと、 **Truffle** が期待通りに動かなくなる。

２つ目は、この構成ルールに従うことで、他の開発者がお前のプロジェクトを理解しやすくなるということだ。標準のフォルダー構成とコーディング規則を使えば、配布したりチームメンバを変えたりした時に役立つだろう。


## truffle-hdwallet-provider

このレッスンでは、 _Infura_ を使ってコードを **_Ethereum_** にデプロイする。この方法を使えば、アプリを動かすのに **_Ethereum_** のノードやウォレットを独自にセットアップする必要がなくなるのだ。
しかし、安全面から、 _Infura_ は秘密鍵の管理をしない。つまり、我々に代わって取引に署名することはできないということだ。**Truffle** に署名を要求するスマートコントラクトをデプロイするためには、 `truffle-hdwallet-provider` というツールを使うぞ。このツールの唯一の目的は、取引に署名処理を施すことだ。

> 注: もしかしたら前の章で `truffle-hdwallet-provider` を次のようなコマンドを叩いてインストールしなかったことを不思議に思っているかもしれない:

 ```JavaScript
 npm install truffle truffle-hdwallet-provider
 ```
 
そう…`truffle init`コマンドを叩くには、空のディレクトリーである必要があるのだ。もし１つでもファイルが存在すれば、エラーになってしまう。従って、手順通りに`truffle init`をした後に`truffle-hdwallet-provider`をインストールしなければならないのだ。


# さあテストだ

1. `truffle init`コマンドを叩け。先ほど説明したようなディレクトリー構成を作ってくれるだろう。

2. `npm install truffle-hdwallet-provider`コマンドを叩け。
