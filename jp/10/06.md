---
title: 我々のスマートコントラクトをデプロイする
actions: ['答え合わせ', 'ヒント']
requireLogin: true
material:
  terminal:
    help:
      You should probably run `truffle migrate --network rinkeby`.
    commands:
        "truffle migrate --network rinkeby":
            hint: truffle migrate --network rinkeby
            output: |
                Using network 'rinkeby'.

                Running migration: 1_initial_migration.js
                Deploying Migrations...
                ... 0xfc34bb95778e4bd53b80c6b705e5df6e753b1accecc38cfd35cb02c0e37ee223
                Migrations: 0x9aba355cd9e68758c7bd9f1e58f911e0479fd29c
                Saving successful migration to network...
                ... 0x485c7e8096d61a8a1e3efa8d9f5c675b707ca7580ecdb46a307b11146351fc9d
                Saving artifacts...
                Running migration: 2_crypto_zombies.js
                Deploying CryptoZombies...
                ... 0xeed64afd64669674d0bc5a68e8c1f86a620d4bd338a652fc42f54353a252d07c
                CryptoZombies: 0xccdfdc3d7e002965843d52e610370e8d29d5737f
                Saving successful migration to network...
                ... 0xdcb1e77f4c1b3982bb15b10bec69bdafbc88fd4ea0b868971e850b02875de68e
                Saving artifacts...
---

やったな！さっきのは難所だった - 実際のところ、Rinkebyへのデプロイは簡単だ。デプロイする時に、 **Truffle** は **_マイグレーション_** というものに依存するのであったな。

# マイグレーション

マイグレーションは多くの働きをしているように感じたかもしれないが、実際には、スマートコントラクトの状態を変更する方法を **Truffle** に伝えているにすぎない。

最初のマイグレーションはスマートコントラクトにデプロイするだけだ。他のマイグレーションもコードの最新バージョンや追加機能、バグ修正をデプロイしているだけだ。

一言で言えば、マイグレーションはコードの変更を追跡する便利機能を提供している。

複数のコントラクトをデプロイする時は、コントラクト毎に別々のマイグレーションを用意する。マイグレーションは1,2,3, etcの順に実行されるぞ。

このレッスンではRinkebyに向けてだけデプロイすることとする。メインネットにデプロイするにはガス代としてお金を支払わなければならないし、デプロイしてしまうとコードを修正できなくなってしまうからだ。従って、まずはRinkebyにデプロイし、コードをテストすることが最善であろう。

## イーサを獲得する

デプロイする前に、お前のアカウントに充分なイーサがなければならない。テスト目的でイーサを獲得する簡単な方法として、 `faucet` というサービスが知られている。Rinkeby上で<a href="https://faucet.rinkeby.io/" target=”_blank”> Authenticated Faucet</a>を動作させることを勧めるぞ。指示に従うと、数分後にはお前のアドレスにいくらかのイーサが入金されるだろう。

# さあテストだ

1. 準備ができたら、Rinkebyにデプロイするぞ。右のターミナルで`truffle migrate --network rinkeby`コマンドを叩け。マイグレーションが実行される順番に注意するんだぞ😉。

 > 注: `truffle deploy` は `truffle migrate` のエイリアスだ。しかし、我々のコマンドラインのインタプリタは基本的なものだから、`migrate` でないと正しく認識できないぞ。

メインネットへのデプロイは難しくないぞ。スマートコントラクトをテストできたら、`truffle migrate --network mainnet`コマンドを叩くだけだ。ガス代の支払いを忘れるな！お前はやれると信じている。

全てが順調なら、右と似たようなレスポンスが返されるだろう。
