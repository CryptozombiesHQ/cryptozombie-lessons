---
title: Truffle 시작하기
actions: ["checkAnswer", "hints"]
requireLogin: true
material:
  terminal:
    help: |
      먼저 `truffle init`을 실행해야 합니다. 다음으로 `npm install truffle-hdwallet-provider`를 실행합니다.
    commands:
      "truffle init":
        hint: truffle init
        output: |
          Downloading...
          Unpacking...
          Setting up...
          Unbox successful. Sweet!

          Commands:

              Compile:        truffle compile
              Migrate:        truffle migrate
              Test contracts: truffle test
      "npm install truffle-hdwallet-provider":
        hint: npm install truffle-hdwallet-provider
        output: |
          + truffle-hdwallet-provider@0.0.6
          added 1 package from 1 contributor and audited 71402 packages in 5.612s
          found 0 vulnerabilities
---

**Truffle**을 설치했으므로 이제 `truffle init`을 실행하여 새 프로젝트를 초기화할 시간이라네. 다음 구조의 폴더 및 구성 파일 셋을 생성하기만 하면 된다네:

```
├── contracts
    ├── Migrations.sol
├── migrations
    ├── 1_initial_migration.js
└── test
truffle-config.js
truffle.js
```

Contracts, migrations, tests... 꽤나 복잡해보이는군😟

걱정하지 말게. **Truffle** 사용법을 배운다고 해서 뇌가 파먹히지는 않을테니 말이야. 이 장에서는 **Truffle**의 기본 프로젝트 구조를 안내할 것이라네. 자네가 **Truffle** 사용 방법을 익히게 된다면 스마트 컨트랙트를 배포하는 것이 매우 쉬울 것이야.

## Truffle의 기본 디렉토리 구조

`CryptoZombies` 디렉토리 내에서 `truffle init` 명령을 실행했으니 여러 디렉토리와 몇몇 JavaScript 파일 및 Solidity 파일들이 만들어졌을 것이라네. 자세히 살펴보도록 하지:

- **_contracts_**: **Truffle**이 자네의 모든 스마트 컨트랙트를 찾을 것으로 기대하는 곳이라네. 코드를 체계적으로 유지하기 위해 `contracts/tokens`와 같은 중첩 폴더를 만들 수도 있지. 꽤나 깔끔하군😉.

> Note: `truffle init`은 `Migrations.sol`이라는 컨트랙트와 해당 마이그레이션 파일을 자동으로 생성해야 합니다. 잠시 후에 설명할 것일세.

- **_migrations_**: migration은 **Truffle**에게 스마트 컨트랙트를 배포하는 방법을 알려주는 JavaScript 파일이라네.

- **_test_**: 이 디렉토리는 JavaScript 또는 Solidity 파일이 될 단위 테스트를 넣는 곳이라네. 계약이 배포되면 변경할 수 없으므로 배포하기 전에 스마트 컨트랙트를 테스트하는 것이 중요하다네.

- **_truffle.js_** 와 **_truffle-config.js_**: 배포를 위한 네트워크 설정을 저장하는 데 사용되는 구성 파일이라네. **Truffle**은 Windows에서 동일한 폴더에 `truffle.js`와 `truffle.exe`가 모두 있는 경우 충돌이 발생할 수 있으므로 두 개의 구성 파일이 필요하다네. 간단히 말해서 Windows에서 실행하는 경우 `truffle.js`를 삭제하고 `truffle-config.js`를 기본 구성 파일로 사용하는 것이 좋다네. 더 자세한 설명은 **Truffle**의 <a href="https://truffleframework.com/docs/truffle/reference/configuration" target=_blank>공식 문서</a>에서 확인하게.

그런데 자네는 의문이 있어보이는군. 디렉토리 구조가 익숙하지도 않고 복잡해 보이는데 왜 이렇게 이용해야 하는지 말이야...

여기에는 몇가지 이유가 있다네. 먼저 **Truffle**은 이러한 폴더들의 이름을 변경하면 예상대로 작동하지 않는다네.

둘째로는, 이 규칙을 준수하면 다른 개발자가 프로젝트를 쉽게 이해할 수 있다는 장점이 있다네. 간단히 말해서 표준 폴더 구조와 코드 규칙을 사용하면 나중에 팀을 확장하거나 변경할 때 더 쉽게 만들 수 있지 않겠나?

## truffle-hdwallet-provider

이번 레슨에서는 **_Infura_**를 사용하여 **_Ethereum_**에 코드를 배포해볼 것이라네. 이렇게 하면 자체 **_Ethereum_** 노드나 지갑을 설정할 필요 없이 애플리케이션을 실행할 수 있지.
그러나 보안을 유지하기 위해 **_Infura_**는 개인 키를 관리하지 않는다네. 즉, 우리를 대신하여 트랜잭션에 서명할 수 없다는 것일세. 스마트 계약을 배포하려면 트랜잭션에 서명하기 위해 **Truffle**이 필요하므로 `truffle-hdwallet-provider`라는 도구가 필요하지. 바로 트랜잭션 서명을 처리하기 위한 것이야.

> Note: 이전 챕터에서 왜 다음의 명령을 사용하여 `truffle-hdwallet-provider`를 설치하지 않았는지 궁금하다면 아래의 설명을 보게나.:

```JavaScript
npm install truffle truffle-hdwallet-provider
```

먼저 `truffle init` 명령은 빈 디렉토리를 찾을 것이라네. 따라서 파일이 있으면 오류가 발생하지. 이 때문에 모든 작업을 올바른 순서로 수행하고 `truffle init`를 실행한 뒤에서야 `truffle-hdwallet-provider`를 설치해야 한다네.

# 직접 해보기

1. `truffle init` 를 실행해보게. 이 명령은 우리가 배운 디렉토리 구조를 만든다네.

2. `npm install truffle-hdwallet-provider` 를 실행해보게.
