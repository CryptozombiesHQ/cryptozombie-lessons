---
title: é…ç½®æ–‡ä»¶
actions: ['checkAnswer', 'hints']
requireLogin: true
material:
  editor:
    language: javascript
    startingCode:
      "truffle.js": |
        /*
        * NB: since truffle-hdwallet-provider 0.0.5 you must wrap HDWallet providers in a
        * function when declaring them. Failure to do so will cause commands to hang. ex:
        *
        * mainnet: {
        *     provider: function() {
        *       return new HDWalletProvider(mnemonic, 'https://mainnet.infura.io/<infura-key>')
        *     },
        *     network_id: '1',
        *     gas: 4500000,
        *     gasPrice: 10000000000,
        *   },
        */
      
    answer: |

      const HDWalletProvider = require("truffle-hdwallet-provider");

      // Set your own mnemonic here
      const mnemonic = "YOUR_MNEMONIC";

      // Module exports to make this configuration available to Truffle itself
      module.exports = {
        // Object with configuration for each network
        networks: {
          // Configuration for mainnet
          mainnet: {
            provider: function () {
              // Setting the provider with the Infura Rinkeby address and Token
              return new HDWalletProvider(mnemonic, "https://mainnet.infura.io/v3/YOUR_TOKEN")
            },
            network_id: "1"
          },
          // Configuration for rinkeby network
          rinkeby: {
            // Special function to setup the provider
            provider: function () {
              // Setting the provider with the Infura Rinkeby address and Token
              return new HDWalletProvider(mnemonic, "https://rinkeby.infura.io/v3/YOUR_TOKEN")
            },
            // Network id is 4 for Rinkeby
            network_id: 4
          }
        }
      }; 
---
å¤ªæ£’äº†ï¼ä½ å·²ç»æˆåŠŸåœ°ç¼–è¯‘äº†æºä»£ç å¹¶åˆ›å»ºäº†è¿ç§»æ–‡ä»¶ã€‚

åœ¨éƒ¨ç½²ä¹‹å‰è¿˜æœ‰ä¸€ä»¶äº‹è¦åšã€‚æˆ‘ä»¬å¿…é¡»ç¼–è¾‘é…ç½®æ–‡ä»¶ï¼Œæ¥å‘Šè¯‰ **Truffle** æˆ‘ä»¬æƒ³è¦éƒ¨ç½²åˆ°å“ªäº›ç½‘ç»œã€‚

ç­‰ä¸€ä¸‹ï¼Ÿä¸æ˜¯åªæœ‰ä¸€ä¸ª **_ä»¥å¤ªåŠ_** ç½‘ç»œå˜›ï¼Œæ˜¯æˆ‘é”™è¿‡ä»€ä¹ˆäº†å—/

## ä»¥å¤ªåŠæµ‹è¯•ç½‘ç»œ

å¥½å‡ ä¸ª **_ä»¥å¤ªåŠ_** å…¬å…±æµ‹è¯•ç½‘ç»œå…è®¸ä½ åœ¨å°†åˆçº¦éƒ¨ç½²åˆ°ä¸»ç½‘ä¹‹å‰å…è´¹æµ‹è¯•ï¼ˆè¯·è®°ä½ï¼Œä¸€æ—¦å°†åˆçº¦éƒ¨ç½²åˆ°ä¸»ç½‘åï¼Œå°±ä¸èƒ½å†æ›´æ”¹äº†ï¼‰ã€‚è¿™äº›æµ‹è¯•ç½‘ä½¿ç”¨ä¸ä¸»ç½‘ä¸åŒçš„å…±è¯†ç®—æ³•ï¼ˆé€šå¸¸æ˜¯PoAï¼‰ï¼Œä¸ºé¼“åŠ±å…¨é¢æµ‹è¯•ï¼ŒEther å…è´¹è¯•ç”¨ã€‚Ether is free to encourage thorough testing.

åœ¨è¿™èŠ‚è¯¾ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨  **_Rinkeby_** â€”â€” ç”±ä»¥å¤ªåŠåŸºé‡‘ä¼šåˆ›å»ºçš„å…¬å…±æµ‹è¯•ç½‘ç»œã€‚

## truffle.js é…ç½®æ–‡ä»¶

ç°åœ¨ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹é»˜è®¤çš„ **Truffle** é…ç½®æ–‡ä»¶:

```bash
$ cat truffle.js
/*
 * NB: since truffle-hdwallet-provider 0.0.5 you must wrap HDWallet providers in a
 * function when declaring them. Failure to do so will cause commands to hang. ex:
 *
 * mainnet: {
 *     provider: function() {
 *       return new HDWalletProvider(mnemonic, 'https://mainnet.infura.io/<infura-key>')
 *     },
 *     network_id: '1',
 *     gas: 4500000,
 *     gasPrice: 10000000000,
 *   },
 */
```

å®ƒåªæ˜¯ä¸ªç©º shellã€‚å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦æ›´æ–°è¿™ä¸ªæ–‡ä»¶ï¼Œä»¥ä¾¿å°†åˆçº¦éƒ¨ç½²åˆ° Rinkeby å’Œä»¥å¤ªåŠä¸»ç½‘ã€‚

### Truffle çš„ç¡¬ä»¶é’±åŒ… provider 

è¿˜è®°å¾—ç¬¬äºŒç« å—ï¼Ÿ

æˆ‘ä»¬è®©ä½ è£…äº†ä¸€ä¸ªå«åš `truffle-hdwallet-provider` çš„é™„åŠ åŒ…ï¼Œå¥½å¸®åŠ© **Truffle** ç­¾ç½²äº‹åŠ¡ã€‚

ç°åœ¨ï¼Œæˆ‘ä»¬æƒ³è¦ç¼–è¾‘é…ç½®æ–‡ä»¶ä»¥ä½¿ç”¨ `HDWalletProvider`ã€‚å…ˆå¾—åœ¨æ–‡ä»¶é¡¶éƒ¨æ·»åŠ ä¸€è¡Œ:

```JavaScript
var HDWalletProvider = require("truffle-hdwallet-provider");
```

ç„¶åï¼Œåˆ›å»ºä¸€ä¸ªæ–°å˜é‡æ¥å­˜å‚¨æˆ‘ä»¬çš„åŠ©è®°è¯:

```JavaScript
var mnemonic = "onions carrots beans ...";
```

æ³¨æ„ï¼Œæˆ‘ä»¬ä¸å»ºè®®æŠŠåŠ©è®°è¯æˆ–ç§é’¥ä¹‹ç±»ç­‰ç§˜å¯†å­˜å‚¨åœ¨é…ç½®æ–‡ä»¶ä¸­ã€‚

â€¦â€¦ ä¸ºä»€ä¹ˆå‘¢?

é…ç½®æ–‡ä»¶é€šå¸¸ä¼šæ”¾åˆ° GitHub ä¸Šï¼Œä»»ä½•äººéƒ½å¯ä»¥çœ‹åˆ°å®ƒä»¬ï¼Œç­‰äºæ˜¯æ•å¼€äº†è®©åˆ«äººæ¥æ”»å‡» ğŸ˜±ï¼ä¸ºäº†é¿å…æ³„éœ²ä½ çš„åŠ©è®°è¯ï¼ˆæˆ–ç§é’¥!ï¼‰ï¼Œä½ åº”è¯¥ä»æ–‡ä»¶ä¸­è¯»å–å®ƒï¼Œå¹¶å°†è¯¥æ–‡ä»¶æ·»åŠ åˆ° `.gitignore`ã€‚ç¨åæˆ‘ä»¬ä¼šæ•™ä½ æ€ä¹ˆåšã€‚

**åœ¨æœ¬ä¾‹ä¸­ï¼Œä¸ºäº†ç®€å•èµ·è§**ï¼Œæˆ‘ä»¬å¤åˆ¶äº†åŠ©è®°è¯å¹¶å°†å…¶å­˜å‚¨åœ¨ä¸€ä¸ªå˜é‡ä¸­ã€‚

### ä¸º Rinkeby å’Œä»¥å¤ªåŠä¸»ç½‘è®¾ç½® Truffle 

æ¥ä¸‹æ¥ï¼Œä¸ºäº†ç¡®ä¿ **Truffle** â€œçŸ¥é“â€æˆ‘ä»¬æƒ³è¦éƒ¨ç½²åˆ°å“ªäº›ç½‘ç»œï¼Œæˆ‘ä»¬å¿…é¡»åˆ›å»ºä¸¤ä¸ªå•ç‹¬çš„å¯¹è±¡ â€”â€” ä¸€ä¸ªç”¨äº Rinkebyï¼Œå¦ä¸€ä¸ªç”¨äº **_ä»¥å¤ªåŠ_** ä¸»ç½‘:

```JavaScript
networks: {
  // Configuration for mainnet
  mainnet: {
    provider: function () {
      // Setting the provider with the Infura Rinkeby address and Token
      return new HDWalletProvider(mnemonic, "https://mainnet.infura.io/v3/YOUR_TOKEN")
    },
    network_id: "1"
  },
  // Configuration for rinkeby network
  rinkeby: {
    // Special function to setup the provider
    provider: function () {
      // Setting the provider with the Infura Rinkeby address and Token
      return new HDWalletProvider(mnemonic, "https://rinkeby.infura.io/v3/YOUR_TOKEN")
    },
    // Network id is 4 for Rinkeby
    network_id: 4
  }
```

>æ³¨æ„ï¼š provider å€¼åŒ…è£…åœ¨ä¸€ä¸ªå‡½æ•°ä¸­ï¼Œè¿™ç¡®ä¿äº†åœ¨éœ€è¦æ—¶æ‰å¯¹å®ƒè¿›è¡Œåˆå§‹åŒ–ã€‚

### å¿«ç»“æŸäº†

ç°åœ¨ï¼Œè®©æˆ‘ä»¬æŠŠè¿™äº›éƒ½æ”¾åœ¨ä¸€èµ·ï¼Œçœ‹çœ‹æˆ‘ä»¬çš„é…ç½®æ–‡ä»¶é•¿ä»€ä¹ˆæ ·:

```JavaScript
// Initialize HDWalletProvider
const HDWalletProvider = require("truffle-hdwallet-provider");

// Set your own mnemonic here
const mnemonic = "YOUR_MNEMONIC";

// Module exports to make this configuration available to Truffle itself
module.exports = {
  // Object with configuration for each network
  networks: {
    // Configuration for mainnet
    mainnet: {
      provider: function () {
        // Setting the provider with the Infura Rinkeby address and Token
        return new HDWalletProvider(mnemonic, "https://mainnet.infura.io/v3/YOUR_TOKEN")
      },
      network_id: "1"
    },
    // Configuration for rinkeby network
    rinkeby: {
      // Special function to setup the provider
      provider: function () {
        // Setting the provider with the Infura Rinkeby address and Token
        return new HDWalletProvider(mnemonic, "https://rinkeby.infura.io/v3/YOUR_TOKEN")
      },
      // Network id is 4 for Rinkeby
      network_id: 4
    }
  }
};
```

# å®æˆ˜æ¼”ä¹ :

æˆ‘ä»¬å·²ç»ä¸ºä½ æ›´æ–°äº†å¤§éƒ¨åˆ†é…ç½®æ–‡ä»¶ã€‚ç°åœ¨æ¥å¡«è¡¥ç¼ºå¤±çš„éƒ¨åˆ†å§:

1. åœ¨æ–‡ä»¶é¡¶éƒ¨ï¼Œæ·»åŠ åˆå§‹åŒ– `truff -hdwallet-provider` çš„ä»£ç è¡Œã€‚
   
2. å¡«å†™ Rinkeby ç½‘ç»œçš„ `network_id`ã€‚å¦‚æœä½ ä¸è®°å¾—è¯¥å‚æ•°çš„å€¼ï¼Œè¯·æ£€æŸ¥ä¸Šé¢çš„ä»£ç ç‰‡æ®µã€‚
