---
title: Il primo test - Creazione di uno zombie (continua)
actions: ['checkAnswer', 'hints']
requireLogin: true
material:
  editor:
    language: javascript
    startingCode:
      'test/CryptoZombies.js': |
        const CryptoZombies = artifacts.require("CryptoZombies");
        const zombieNames = ["Zombie 1", "Zombie 2"];
        contract("CryptoZombies", (accounts) => {
            let [alice, bob] = accounts;
            it("should be able to create a new zombie", async () => {
                // start here
            })
        })

    answer: >
      const CryptoZombies = artifacts.require("CryptoZombies");

      const zombieNames = ["Zombie 1", "Zombie 2"];

      contract("CryptoZombies", (accounts) => {
          let [alice, bob] = accounts;
          it("should be able to create a new zombie", async () => {
              const contractInstance = await CryptoZombies.new();
          })
      })
---

Ottimo lavoro! Ora che abbiamo una shell per il nostro primo test, lascia che ti spieghi come funziona.

Solitamente, ogni test ha le seguenti fasi:

1.  **_set up_**: in cui definiamo lo stato iniziale e inizializziamo gli input.

2.  **_act_**: dove testiamo effettivamente il codice. Assicurati sempre di _testare solo una cosa_.

3.  **_assert_:** dove controlliamo i risultati.

Diamo un'occhiata a cosa dovrebbe fare il nostro test in modo piÃ¹ dettagliato.

## 1. Impostazione

Nel Capitolo 2, hai imparato a creare una _contract abstraction_. Tuttavia, una \__contract abstraction_, come dice il nome, Ã¨ solo un'astrazione. Per interagire effettivamente con il smart contract, dobbiamo creare un oggetto _JavaScript_ che fungerÃ  da **istanza** del contratto. Continuando il nostro esempio con `MyAwesomeContract`, possiamo usare la _contract abstraction_ per inizializzare la nostra istanza in questo modo:

```javascript
const contractInstance = await MyAwesomeContract.new();
```

Bene, allora come andiamo avanti?

Chiamare `createRandomZombie` richiede di passargli il nome dello zombi come parametro. Quindi, il passo successivo sarebbe dare un nome allo zombi di Alice. Qualcosa come "Alice's Awesome Zombie".

Tuttavia, se lo facciamo per ogni test, il nostro codice non avrÃ  un bell'aspetto. Un approccio migliore consiste nell'inizializzazione di un array globale come segue:

```javascript
const zombieNames = ['Zombie #1', 'Zombie #2'];
```

E poi, chiamare i metodi del contratto in questo modo:

```javascript
contractInstance.createRandomZombie(zombieNames[0]);
```

> Nota: l'uso di un array per memorizzare i nomi degli zombi Ã¨ utile se vuoi, ad esempio, scrivere un test che crei 1000 zombi invece di uno o dueðŸ˜‰.

# Testiamo

Siamo andati avanti e abbiamo inizializzato l'array `zombieNames` per te.

1. Creiamo un'istanza del nostro contratto. Dichiara un nuovo `const` chiamato `contractInstance` e impostalo uguale al risultato della funzione `CryptoZombies.new()`.

2. `CryptoZombies.new()` comunica con la blockchain. CiÃ² significa che deve essere una funzione asincrona. Aggiungiamo la parola chiave `await` prima della chiamata di funzione.
